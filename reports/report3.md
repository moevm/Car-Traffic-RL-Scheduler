# Разработка планирования дорожного трафика с помощью Reinforcement Learning

## Выполненные задачи

### Разработать скрипт для генерации карт

Разработан скрипт mapGenerator.py, который является надстройкой над утилитой netgenerate, с помощью которой можно сгенерировать одну карту. Реализованный скрипт позволяет сгенерировать несколько карт сразу, причём параметры для карт берутся из равномерного распределения, которое задаётся аргументами скрипта mapGenerator.py. Например, у карты типа сетка существует такой параметр, как длина горизонтального ребра. С помощью реализованного скрипта можно сгенерировать несколько карт типа сетка, при этом задать интервал генерации длины горизонтального ребра. Таким образом можно быстро генерировать несколько карт, регулируя их схожесть между собой, основанную на параметрах.

### Реализовать генерацию транспортных средств на краях карты

Для решения данной задачи был реализован класс TransportGeneration, который получает на вход маршруты в виде последовательности рёбер, по которым должны проехать транспортные средства. Внутри класса создаются транспортные средства и им присваиваются маршруты.

### Генерация маршрутов по равномерному распределению

Для решения данной задачи были реализованы классы Net и RouteGeneration. Класс Net предоставляет возможность прокладывать кратчайшие пути между вершинами с помощью алгоритма Дейкстры. На каждом шаге симуляции происходит следующее:

* Случайным образом выбирается количество маршрутов (пусть будет $x$), которое будет сгенерировано. Количество маршрутов должно быть не более количества висячих вершин (въездов в город, множество $S$) и не менее 1. 
* Выбирается $x$ вершин в графе (множество $E$), при этом предпочтение отдаётся тем вершинам, на которых оканчивается меньше маршрутов.
* Из множества висячих вершин $S$ на время итерации симуляции удаляется $i$-ая выбранная вершина (чтобы не получилось маршрута из A в A).
* Выбирается такая вершина из множества $S$, чтобы длина маршрута в метрах ранее не встречалась для $i$-ой вершины из множества $E$. Если все длины маршрутов встречались для $i$-ой вершины из множества $E$, то берётся такая вершина из множества $S$, что количество маршрутов из данной вершины в $i$-ую вершину множества $E$ было меньше количества остальных маршрутов.

Таким образом, алгоритм обеспечивает равномерное распределение конечных точек по количеству маршрутов и равномерное распределение различных маршрутов для каждой конечной точки.

Скринкаст: https://drive.google.com/file/d/1x0iIyRtEPli59wGkaZF3usd0sf3sVWqW/view?usp=sharing

## Задачи на следующую итерацию

1. Обернуть проект в Docker.
2. Добавить .idea и pycache в .gitignore.
3. Сделать Readme с указаниями для запуска проекта.
4. Отредактировать код в соответствии с тем, что равномерное распределение маршрутов требуется лишь для инициализации карты.