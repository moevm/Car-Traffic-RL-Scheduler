# Разработка планирования дорожного трафика с помощью Reinforcement Learning

## Выполненные задачи

### Рассмотреть аналоги генерации карт, трафика, различных параметров сети и есть ли обоснование их идей/алгоритмов/моделей.

#### Аналоги генерации карт
1. netgenerate в SUMO

    Преимущества:

    a. Можно генерировать карты трёх типов: в виде сетки, паутины и случайные карты с большим количеством параметров.

    Недостатки:

    a. Чтобы генерировать карты, приближенные к реальности, нужно исследовать допустимые значения параметров для случайных карт.

2. OpenStreetMap

    Преимущества:

    a. Карты реального города.

    Недостатки:

    a. Слишком сильная привязка к конкретному городу. Нужно будет вручную отобрать много городов и тестировать на них RL-агентов.

3. Набор сценариев RESCO

    Преимущества:

    a. Данный бенчмарк содержит и карты и файлы с маршрутами, которые помогают протестировать агента/агентов в стресс-тестах.

    Недостатки:

    a. Сценарии содержат очень маленькие участки города.


4. Реальные данные с детекторов
5. Использование дронов для отслеживания интенсивности трафика (сомнительный способ)

#### Существующие аналоги генерации трафика:
1. randomTrips.py в SUMO

    Преимущества:
    
    a. Можно сгенерировать трафик одной командой в терминале.

    b. Можно моделировать трафик с помощью пуассоновских потоков.

    Недостатки:

    a. Маршруты создаваемого трафика не являются кратчайшими или близкими к этому.

    b. Отсутствие гибкости в создании трафика. Например, нельзя во время симуляции выключить создаваемый трафик.

2. Набор сценариев RESCO (описан ранее).
3. SUMO-flowrouter

    Преимущества:

    a. Можно генерировать трафик на основе реальных данных с детекторов (данные с детекторами необходимо где-то найти).

    b. Данный алгоритм решает задачу о максимальном потоке.

    Недостатки:

    a. Необходимо искать данные с детекторов с привязкой к конкретной карте.

    b. Отсутствие гибкости в создании трафика. Например, нельзя во время симуляции выключить создаваемый трафик.
4. Пуассоновские потоки [https://cyberleninka.ru/article/n/modeli-massovogo-obsluzhivaniya-v-zadache-optimizatsii-raboty-svetofora]
   
   В заторах пуассоновские потоки начинают плохо работать и применяются потоки Эрланга или детерминированные потоки.
   * Временные промежутки между генерацией автомобилей берутся из экспоненциального распределения, где $\lambda$ -- интенсивность потока (авто/cек). 
   * Для оценки вероятности, что на данном участке проедет $x$ автомобилей, необходимо воспользоваться формулой функции вероятности:
   $p(x) = \frac{\lambda ^x \cdot e^{-\lambda}}{x!}$
   
   Причины использовать пуассоновские потоки:

   * Независимость генерации автомобилей друг от друга.
   * Довольно простая модель описания.

### Какие решаются задачи в планировании трафика в аналогичных работах?

Максимизация пропускной способности с помощью обучения с подкреплением. Оптимизируются светофорные фазы.

### Вопросы и некоторые идеи
1. Стоит ли делать обгоны? (обгоны происходят через промежутки времени, распределённые по экспоненциальному распределению)
2. Фикисруем ли количество полос движения?
3. Стоит ли учитывать разные сили вождения?
4. Стоит ли имитировать нарушителей ПДД (например, по скорости)?
5. Большинство работ исследуют перекрёстки, небольшие участки транспортной сети.
6. Можно на карте каким-либо образом пометить жилые районы, ТЦ, предприятия, чтобы моделировать реальную обстановку на дорогах: c утра -- на работу, вечером -- с работы, в выходные -- ТЦ.
7. Можно добавить динамику трафика в зависимости от времени суток. То есть, в зависимости от времени суток интенсивность ($\lambda$) будет меняться.

